# 動的パスの生成と取得方法

- App Router（app/ ディレクトリ、推奨） — サーバコンポーネント例:
  - ファイル: `app/posts/[slug]/page.tsx`
  - 中身:
    ```tsx
    export default function PostPage({ params }: { params: { slug: string } }) {
      const { slug } = params;
      return <div>Slug: {slug}</div>;
    }
    ```
  - 静的ページを事前生成する場合:
    ```ts
    export async function generateStaticParams() {
      return [{ slug: 'hello' }, { slug: 'world' }];
    }
    ```
  - クライアントコンポーネントで取得する場合:
    ```tsx
    'use client';
    import { useParams } from 'next/navigation';
    export default function Cmp() {
      const params = useParams(); // { slug: string }
      return <div>{params.slug}</div>;
    }
    ```

- Pages Router（`pages/`） — 互換例:
  - ファイル: `pages/posts/[slug].tsx`
  - 中身（getStaticProps 例）:
    ```tsx
    import { useRouter } from 'next/router';
    export default function Post({ slug }: { slug: string }) {
      const router = useRouter();
      if (router.isFallback) return <div>Loading...</div>;
      return <div>{slug}</div>;
    }

    export async function getStaticPaths() { return { paths: [{ params: { slug: 'hello' }}], fallback: true }; }
    export async function getStaticProps({ params }: any) { return { props: { slug: params.slug } }; }
    ```

- キャッチオール（階層を配列で受け取る）
  - `app/docs/[...slug]/page.tsx` → `params.slug` は `string[]`
  - 省略可能キャッチオール: `[[...slug]]`

- リンクの作り方:
  ```tsx
  import Link from 'next/link';
  <Link href={`/posts/${slug}`}>Open</Link>
  ```
