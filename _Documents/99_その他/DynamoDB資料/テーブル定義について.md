# テーブル定義について

## 1. AttributeDefinition (属性定義)

テーブルで使用する**属性の名前とデータ型**を定義します。

```go
AttributeDefinitions: []types.AttributeDefinition{
    {AttributeName: aws.String("matching_id"), AttributeType: types.ScalarAttributeTypeS},
    {AttributeName: aws.String("matching_status"), AttributeType: types.ScalarAttributeTypeS},
    {AttributeName: aws.String("matching_start_datetime"), AttributeType: types.ScalarAttributeTypeS},
}
```

**注意点:**
- **キーに使用する属性のみ**定義が必要
- データ型: `S`(String), `N`(Number), `B`(Binary)
- 通常の属性(キー以外)は定義不要

## 2. KeySchema (キースキーマ)

テーブルの**プライマリキー構造**を定義します。

```go
KeySchema: []types.KeySchemaElement{
    {AttributeName: aws.String("matching_id"), KeyType: types.KeyTypeHash},
}
```

**キータイプ:**
- `HASH` (パーティションキー): データ分散の基準
- `RANGE` (ソートキー): パーティション内での並び順

## 3. GlobalSecondaryIndex (グローバルセカンダリインデックス)

**別のキー構造でクエリ**するためのインデックスです。

```go
GlobalSecondaryIndexes: []types.GlobalSecondaryIndex{
    {
        IndexName: aws.String("MatchingStatusIndex"),
        KeySchema: []types.KeySchemaElement{
            {AttributeName: aws.String("matching_status"), KeyType: types.KeyTypeHash},
            {AttributeName: aws.String("matching_start_datetime"), KeyType: types.KeyTypeRange},
        },
        Projection: &types.Projection{ProjectionType: types.ProjectionTypeAll},
    },
}
```

**特徴:**
- プライマリキー以外でのクエリが可能
- 例: `matching_status="InProgress"` で検索
- `Projection`: インデックスに含める属性の範囲
  - `ALL`: 全属性
  - `KEYS_ONLY`: キーのみ
  - `INCLUDE`: 指定した属性のみ

## 4. 更新箇所について

テーブル定義を変更した場合、ソースコード上のNOTEコメント箇所も更新してください。
Todo-Treeなどのツールで見逃しを防止できます。