# 移行のロードマップ

## はじめに

もともとの構成は

* WebSocketのゲートウェイ
    * インフラ：WebPubSub
* ゲームサーバー
    * 開発言語：Node.js
    * インフラ：Azure Functions
    * 通信方式：WebSocket
* クライアント
    * フレームワーク：Remix
    * インフラ：Azure Container Apps

上記の構成を変更する

### 目的

* AWSへの移行
* 学習 + 高速化 を目的とした開発言語の変更

### 変更後の構成

* WebSocketのゲートウェイ
    * インフラ：Amazon API Gateway (WebSocket)
* ゲームサーバー
    * 開発言語：Rust
    * インフラ：AWS Lambda + Amazon API Gateway (HTTP)
    * 通信方式：WebSocket
* クライアント
    * フレームワーク：Next.js
    * インフラ：AWS Amplify

上記の構成で、高速化と固定費の削減を目指す

## ロードマップ

### フェーズ1: 準備と基礎構築

* 以下のプロジェクトを作成済み
    * Amazon API Gateway (WebSocket)のDockerモック構築
    * Rustのゲームサーバーのプロジェクト
    * Next.jsのクライアントのプロジェクト

### フェーズ2: サンプルアプリのデプロイ

まずは以下の超かんたんアプリをデプロイして、各コンポーネントの動作確認を行う

* WebSocketゲートウェイ
    * クライアントからの接続を受け入れる
* ゲームサーバー
    * HTTPリクエストを受け取る
    * メッセージをDynamoDBに保存する
    * メッセージをすべての接続中クライアントに返す
* クライアント
    * WebSocketでゲートウェイに接続し、メッセージを送信する

